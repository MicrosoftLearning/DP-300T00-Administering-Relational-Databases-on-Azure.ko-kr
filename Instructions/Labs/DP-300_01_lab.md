---
lab:
  title: 랩 1 - Azure Portal 및 SQL Server Management Studio 사용
  module: The Role of the Azure Database Administrator
---


# <a name="lab-1---using-the-azure-portal-and-sql-server-management-studio"></a>랩 1 - Azure Portal 및 SQL Server Management Studio 사용

**예상 소요 시간: 30분**

**사전 요구 사항: 없음** 

**랩 파일: 없음**

 

# <a name="lab-overview"></a>랩 개요 

Students will explore the Azure Portal and use it to create an Azure VM with SQL Server 2019 installed. Then they will connect to the virtual machine through Remote Desktop Protocol and restore a database using SQL Server Management Studio. 

# <a name="lab-goal"></a>랩 목표

The student will be able to interact with the Azure portal to create a SQL Server Virtual Machine. They should then be able to connect to the virtual machine and use SQL Server Management Studio to restore a database. 

# <a name="lab-objectives"></a>랩 목표

학생들은 다음을 수행합니다:

- Azure Portal과 상호 작용

- SQL Server Virtual Machine 만들기

- SQL Server Management Studio를 사용하여 데이터베이스 복원

# <a name="scenario"></a>시나리오

You are a database administrator for AdventureWorks. You need to create a test environment for use in a proof of concept. The proof of concept will use SQL Server on an Azure Virtual Machine and a backup of the AdventureWorksDW database. You need to set up the Virtual Machine, restore the database, and query it to ensure it is available. 

# <a name="exercise-1-provision-a-sql-server-on-an-azure-virtual-machine"></a>연습 1: Azure 가상 머신에서 SQL Server 프로비저닝

**예상 소요 시간: 20분**

이 연습의 주요 태스크는 다음과 같습니다. 

1. Azure Portal을 살펴보고 중요한 기능을 찾습니다.

2. Azure Portal을 사용하여 Azure Virtual Machine에서 SQL Server를 만듭니다.

 

## <a name="task-1-explore-the-azure-portal"></a>작업 1: Azure Portal 살펴보기

1. 아직 포털에 액세스하지 않았으면 랩 가상 머신에서 브라우저 세션을 시작하여 [https://portal.azure.com](https://portal.azure.com/)으로 이동합니다. 

    ![그림 1](../images/dp-3300-module-11-lab-01.png)

 

2. In the Azure Portal, type subscription in the search bar at the top of the screen. Click on the subscriptions icon. (You may need to log in first.)

    ![그림 2](../images/dp-3300-module-11-lab-02.png)

 

3. On the Subscriptions blade, you will have one or more subscriptions. Review your Subscription name, subscription ID, and your role. 

    ![그림 3](../images/dp-3300-module-11-lab-03.png)

4. Launch the left navigation pane by clicking the horizontal lines next to Microsoft Azure in the top left of the portal. Then select All resources. 

    ![그림 4](../images/dp-3300-module-11-lab-04.png)

    ![그림 5](../images/dp-3300-module-11-lab-05.png)

 

5. 모든 리소스 페이지에는 선택한 구독 내에 모든 Azure 리소스가 나열됩니다. 

 

6. 왼쪽 탐색에서 리소스 그룹을 선택합니다.

    ![그림 6](../images/dp-3300-module-11-lab-06.png)

    

    리소스 그룹 블레이드에는 선택한 구독 내에 모든 Azure 리소스 그룹이 나열됩니다. 


7. 리소스 그룹 블레이드에서 만들기 단추를 선택합니다. 

    ![그림 7](../images/dp-3300-module-11-lab-07.png)

 
8. Ensure you have selected the appropriate subscription for the lab. Name the resource group DP-300-Lab01. Select the nearest Azure region to your location. Select the Review + Create button. Once the review completes, select the Create button. 

    ![그림 8](../images/dp-3300-module-11-lab-08.png)

9. 학생은 Azure Portal을 탐색하고 이를 사용하여 설치된 SQL Server 2019에서 Azure VM을 만듭니다.

    ![그림 9](../images/dp-3300-module-11-lab-09.png)

 

## <a name="task-2-provision-a-sql-server-on-an-azure-virtual-machine"></a>작업 2: Azure 가상 머신에서 SQL Server 프로비저닝

1. Azure SQL 블레이드에서 만들기 단추를 선택합니다. 

    ![그림 10](../images/dp-3300-module-11-lab-10.png)


2. 그런 다음, 원격 데스크톱 프로토콜을 통해 가상 머신에 연결하고 SQL Server Management Studio를 사용하여 데이터베이스를 복원합니다.
    
    ![그림 11](../images/dp-3300-module-11-lab-11.png)

3. 가상 머신 만들기 블레이드에 다음 정보를 입력합니다. 

    - 구독: **&lt;본인의 구독&gt;**

    - 리소스 그룹: **DP-300-Lab01**

    - 가상 머신 이름: **dp300sqlvmlab01**

    - 지역: **&lt;사용자 리소스 그룹에 대해 선택한 것과 동일한 사용자 지역&gt;**

    - 가용성 옵션: **인프라 중복 필요 없음**
    
    - 이미지: **무료 SQL Server 라이선스: Windows Server 2019의 SQL 2019 Developer - 1세대**

    - Azure Spot 인스턴스: **아니요**

    - 크기: 표준 **D2s_v3**(vCPU 2개, 옵션은 메모리 8GiB, "모든 크기 보기" 링크를 선택해야 표시될 수 있음)

    - 관리자 계정 사용자 이름: **dp300sqlvmlab01admin**

    - 관리자 계정 암호: **pwd!DP300lab01**(또는 기준을 충족하는 사용자 고유 암호)

    - 인바운드 포트 선택: **RDP(3389)**

    - 기존 Windows Server 라이선스를 사용하시겠습니까? ‘아니요’****

 

    나중에 사용할 수 있도록 사용자 이름 및 암호를 적어 둡니다.

    ![그림 12](../images/dp-3300-module-11-lab-12.png)


4. 디스크 탭으로 이동하여 구성을 검토합니다. 

    ![그림 13](../images/dp-3300-module-11-lab-13.png)

 
5. 네트워킹 탭으로 이동하여 구성을 검토합니다. 

    ![그림 14](../images/dp-3300-module-11-lab-14.png)
 

6. 관리 탭으로 이동하여 구성을 검토합니다. 

    ![그림 15](../images/dp-3300-module-11-lab-15.png)

    Make sure that <bpt id="p1">**</bpt>Boot diagnostics<ept id="p1">**</ept> has the button for <bpt id="p2">**</bpt>Enable with managed storage account (recommended)<ept id="p2">**</ept> selected. 
    Verify that <bpt id="p1">**</bpt>Enable auto_shutdown<ept id="p1">**</ept> is off. 


7. 고급 탭으로 이동하여 구성을 검토합니다. 

    ![그림 16](../images/dp-3300-module-11-lab-16.png)


8. SQL Server 설정 탭으로 이동하여 구성을 검토합니다. 

    ![그림 17](../images/dp-3300-module-11-lab-17.png)

 

    Note—you can also configure the storage for your SQL Server VM on this screen. By default, the SQL Server Azure VM templates create one premium disk with read caching for data, one premium disk without caching for transaction log, and uses the local SSD (D:\ on Windows) for tempdb.


9. 학생은 Azure Portal과 상호 작용하여 SQL Server 가상 머신을 만들 수 있습니다.  
‎ ![그림 18](../images/dp-3300-module-11-lab-18.png)


10. 그런 다음, 가상 머신에 연결하고 SQL Server Management Studio를 사용하여 데이터베이스를 복원할 수 있어야 합니다. 

    ![그림 19](../images/dp-3300-module-11-lab-19.png)

 
11. 가상 머신 개요 페이지에서 리소스에 대한 메뉴 옵션을 스크롤하여 사용할 수 있는 옵션을 검토합니다.

    ![그림 20](../images/dp-3300-module-11-lab-20.png)


# <a name="exercise-2-connect-to-sql-server-and-restore-a-backup"></a>연습 2: SQL Server에 연결 및 백업 복원

**예상 소요 시간: 10분**

이 연습의 주요 태스크는 다음과 같습니다. 

1. Azure Virtual Machine에서 SQL Server에 대한 RDP(원격 데스크톱 프로토콜) 연결을 만듭니다.

2. 데이터베이스 백업 파일을 다운로드합니다.

3. SQL Server Management Studio를 사용하여 SQL Server에서 데이터베이스를 복원합니다.

4. 데이터베이스를 쿼리하여 가용성을 확인합니다.

 
## <a name="task-1-connect-to-the-virtual-machine-and-download-the-backup-file"></a>작업 1: Virtual Machine에 연결하고 백업 파일을 다운로드합니다.

1. 가상 머신의 개요 페이지에서 연결 단추를 선택하고 RDP를 선택합니다. 

    ![그림 21](../images/dp-3300-module-11-lab-21.png)

 
2. RDP 탭에서 RDP 파일 다운로드 단추를 선택합니다. 

    ![그림 22](../images/dp-3300-module-11-lab-22.png)

3. Open the RDP file that was just downloaded. When a dialog appears asking if you want to connect, select the Connect button.   
‎   ![그림 23](../images/dp-3300-module-11-lab-23.png)

 
4. In the Windows Security dialog if you receive the PIN dialog, select More choices. Then choose Use a different account. If you don’t receive the PIN dialog, you can proceed to Step 5.

    ![그림 24](../images/dp-3300-module-11-lab-24.png)

 
5. Enter the username and password selected during the virtual machine provisioning process. Then select the OK button.

    ![그림 25](../images/dp-3300-module-11-lab-25.png)

 
6. 연결할지 묻는 원격 데스크톱 연결 대화 상자가 나타나는 경우 예 단추를 선택합니다. 

    ![그림 26](../images/dp-3300-module-11-lab-26.png)


7. A Remote Desktop window will open. On the right, select the No button to indicate you do not want the computer to be discoverable by other devices on the network. Close the small Server Manager popup dialog by clicking the X in the top right of the box. Keep the big Server Manager Window open.

    ![그림 27](../images/dp-3300-module-11-lab-27.png)

 
8. 서버 관리자 창에서 왼쪽의 로컬 서버를 선택한 다음, IE 강화된 보안 구성 옆에 있는 켜기를 선택합니다. 

    ![그림 28](../images/dp-3300-module-11-lab-28.png)

 
9. When the Internet Explorer Enhanced Security Configuration dialog appears, set Administrators to Off. Then select the OK button.

    ![그림 29](../images/dp-3300-module-11-lab-29.png)

 
10. 작업 표시줄에서 아이콘을 선택하여 Internet Explorer를 엽니다. 

    ![그림 30](../images/dp-3300-module-11-lab-30.png)



11. Internet Explorer에서 다음 URL로 이동합니다. 

    [https://github.com/Microsoft/sql-server-samples/releases/download/adventureworks/AdventureWorksDW2017.bak](https://github.com/Microsoft/sql-server-samples/releases/download/adventureworks/AdventureWorksDW2017.bak)

    

    파일을 실행하거나 저장할지 묻는 대화 상자가 나타납니다.   
    ‎![그림 31](../images/dp-3300-module-11-lab-31.png)

 

12. 대화 상자에서 저장 옆에 있는 드롭다운을 선택하고 다른 이름으로 저장을 선택합니다. 

    ![그림 32](../images/dp-3300-module-11-lab-32.png)

 

13. 다른 이름으로 저장 대화 상자에서 다음 폴더 위치로 이동합니다:   
C:\Program Files\Microsoft SQL Server\MSSQL15.MSSQLSERVER\MSSQL\Backup.  
‎ Leave the file name as AdventureWorksDW2017 and the type as BAK file. Select the Save button. 

    ![그림 33](../images/dp-3300-module-11-lab-33.png)
 
## <a name="task-2-restore-the-database-and-verify-its-availability"></a>작업 2: 데이터베이스 복원 및 가용성 확인

 

1. Select the Windows Start button and type SSMS. Select Microsoft SQL Server Management Studio 18 from the list.  
‎ ![그림 34](../images/dp-3300-module-11-lab-34.png)


2. AdventureWorks의 데이터베이스 관리자입니다. 


    ![그림 35](../images/dp-3300-module-11-lab-35.png)

 

3. 개체 탐색기에서 데이터베이스 노드를 마우스 오른쪽 단추로 클릭하고 데이터베이스 복원을 선택합니다.

    ![그림 36](../images/dp-3300-module-11-lab-36.png)

 

4. 데이터베이스 복원 대화 상자의 소스 아래에서 디바이스를 선택하고 타원으로 레이블이 지정된 디바이스 오른쪽에 있는 단추를 선택합니다. 

    ![그림 37](../images/dp-3300-module-11-lab-37.png)

 

5. 백업 디바이스 선택 대화 상자에서 추가를 선택합니다. 

    ![그림 38](../images/dp-3300-module-11-lab-38.png)


6. 로컬 백업 파일 대화 상자에서 AdventureWorksDW2017.bak를 선택한 다음, 확인 단추를 선택합니다. 

    ![그림 39](../images/dp-3300-module-11-lab-39.png)

 
7. 개념 증명에서 사용할 테스트 환경을 만들어야 합니다.

    ![그림 40](../images/dp-3300-module-11-lab-40.png)


8. 개념 증명은 Azure Virtual Machine의 SQL Server 및 AdventureWorksDW 데이터베이스의 백업을 사용합니다. 

    ![그림 41](../images/dp-3300-module-11-lab-41.png)

 
9. Virtual Machine을 설정하고 데이터베이스를 복원하고 쿼리하여 사용할 수 있는지 확인해야 합니다.

    ![그림 42](../images/dp-3300-module-11-lab-42.png)

 

10. In the Object Explorer, expand the Databases node, then expand the AdventureWorksDW2017 node, then expand the Tables node. Verify that the database contains several tables including dbo.DimAccount.

    ![그림 43](../images/dp-3300-module-11-lab-43.png)

 
11. In Management Studio, select the AdventureWorksDW2017 node in the Object Explorer. Then select the New Query button. 

    ![그림 44](../images/dp-3300-module-11-lab-44.png)


12. 다음 문을 복사하여 새 쿼리 창에 붙여넣습니다. 

    ```SQL
    SELECT CalendarYear, Sum(SalesAmount) SalesAmount 

    FROM dbo.FactInternetSales FS

    INNER JOIN dbo.DimDate DD ON FS.OrderDateKey = DD.DateKey

    GROUP BY CalendarYear
    ```

    ![그림 45](../images/dp-3300-module-11-lab-45.png)


13. Select the Execute button execute the query. Verify that the sales amount for 2010 is <bpt id="p1">**</bpt>43421.0364<ept id="p1">**</ept>. 

    ![그림 46](../images/dp-3300-module-11-lab-46.png)

 

 

## <a name="task-3-clean-up"></a>작업 3: 정리

1. 원격 데스크톱을 종료합니다. 

2. Delete the VM you created in this lab to save costs. You will not be using it for subsequent labs. 

3. **dp300sqlvmlab01** 가상 머신의 기본(개요) 블레이드로 이동하여 메뉴에서 삭제 단추를 클릭합니다. 

    ![그림 47](../images/dp-3300-module-11-lab-47.png)
 
4. **확인**을 클릭합니다.
